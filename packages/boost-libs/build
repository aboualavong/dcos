#!/bin/bash

export CPPFLAGS=-I/opt/mesosphere/include
export LDFLAGS="-L/opt/mesosphere/lib -Wl,-rpath=/opt/mesosphere/lib"
export LD_LIBRARY_PATH=/opt/mesosphere/lib

# Use same version of boost as provided by mesos-buildenv
pushd /pkg/src/boost-libs
./bootstrap.sh
# Build the following shared libraries.
# TODO: have mesos-buildenv build these, instead of having this separate pkg?
./b2 --with-filesystem --with-iostreams --with-program_options --with-system -s NO_BZIP2=1
# Move lib dir into pkg
mv -v stage/lib $PKG_PATH
popd
