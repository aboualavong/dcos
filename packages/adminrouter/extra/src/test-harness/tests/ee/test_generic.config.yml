endpoint_tests:
  - tests:
      is_upstream_correct:
        enabled: true
        test_paths:
          - /system/health/v1/foo/bar
        upstream: http:///run/dcos/3dt.sock
    type:
      - master
      - agent
  - tests:
      are_upstream_req_headers_ok:
        enabled: true
        jwt_should_be_forwarded: false
        test_paths:
          - /ca/api/v2/info
          - /ca/api/v2/newcert
          - /ca/api/v2/certificates
          - /ca/api/v2/newkey
          - /ca/api/v2/sign
      is_upstream_correct:
        enabled: true
        test_paths:
          - /ca/api/v2/info
          - /ca/api/v2/newcert
          - /ca/api/v2/certificates
          - /ca/api/v2/newkey
          - /ca/api/v2/sign
        upstream: http://127.0.0.1:8888
      is_upstream_req_ok:
        enabled: true
        expected_http_ver: HTTP/1.0
        test_paths:
          - expected: /ca/api/v2/certificates
            sent: /ca/api/v2/certificates
          - expected: /ca/api/v2/info
            sent: /ca/api/v2/info
          - expected: /ca/api/v2/newcert
            sent: /ca/api/v2/newcert
          - expected: /ca/api/v2/newkey
            sent: /ca/api/v2/newkey
          - expected: /ca/api/v2/sign
            sent: /ca/api/v2/sign
    type:
      - master
  - tests:
      are_upstream_req_headers_ok:
        enabled: true
        jwt_should_be_forwarded: skip
        test_paths:
          - /acs/api/v1/auth/oidc/providers/reflect/me
          - /acs/api/v1/auth/saml/providers/reflect-me/acs-callback
          - /acs/api/v1/users/reflecting-user/permissions
      is_upstream_correct:
        enabled: true
        test_paths:
          - /acs/api/v1/auth/oidc/providers/reflect/me
          - /acs/api/v1/auth/saml/providers/reflect-me/acs-callback
          - /acs/api/v1/users/reflecting-user/permissions
        upstream: http://127.0.0.1:8101
      is_upstream_req_ok:
        enabled: true
        expected_http_ver: HTTP/1.0
        test_paths:
          - expected: /acs/api/v1/auth/saml/providers/reflect-me/acs-callback
            sent: /acs/api/v1/auth/saml/providers/reflect-me/acs-callback
          - expected: /acs/api/v1/auth/oidc/providers/reflect/me
            sent: /acs/api/v1/auth/oidc/providers/reflect/me
          - expected: /acs/api/v1/users/reflecting-user/permissions
            sent: /acs/api/v1/users/reflecting-user/permissions
    type:
      - master
  - tests:
      are_upstream_req_headers_ok:
        enabled: true
        jwt_should_be_forwarded: true
        test_paths:
          - /secrets/v1/foo/bar
      is_upstream_correct:
        enabled: true
        test_paths:
          - /secrets/v1/foo/bar
        upstream: http://127.0.0.1:1337
      is_upstream_req_ok:
        enabled: true
        expected_http_ver: HTTP/1.0
        test_paths:
          - expected: /secrets/v1/foo/bar
            sent: /secrets/v1/foo/bar
    type:
      - master
  - tests:
      are_upstream_req_headers_ok:
        enabled: true
        jwt_should_be_forwarded: false
        test_paths:
          - /vault/default/foo/bar
      is_upstream_correct:
        enabled: true
        test_paths:
          - /vault/default/foo/bar
        upstream: http://127.0.0.1:8200
      is_upstream_req_ok:
        enabled: true
        expected_http_ver: HTTP/1.0
        test_paths:
          - expected: /foo/bar
            sent: /vault/default/foo/bar
    type:
      - master
  - tests:
      are_upstream_req_headers_ok:
        enabled: true
        jwt_should_be_forwarded: skip
        test_paths:
          - /networking/api/v1/foo/bar
      is_upstream_correct:
        enabled: true
        test_paths:
          - /networking/api/v1/foo/bar
        upstream: http://127.0.0.1:61430
      is_upstream_req_ok:
        enabled: true
        expected_http_ver: HTTP/1.0
        test_paths:
          - expected: /foo/bar
            sent: /networking/api/v1/foo/bar
    type:
      - master


location_header_rewrite_tests: []
redirect_tests: []
